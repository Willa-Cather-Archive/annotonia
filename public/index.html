<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JS annotation test</title>

    <!-- jQuery must be included before Annotator -->
    <script src="js/annotonia/annotator/lib/vendor/jquery.js"></script>

    <!-- If you're sure your users will only be using browsers modern
         enough to have their own JSON.parse and JSON.stringify
         implementations you can skip this -->
    <script src="js/annotonia/annotator/lib/vendor/json2.js"></script>

    <!-- The main Annotator script -->
    <script src="js/annotonia/annotator/pkg/annotator.min.js"></script>

    <!-- Annotator's styling and images -->
    <link rel="stylesheet" type="text/css" href="js/annotonia/annotator/pkg/annotator.min.css">

    <!-- The following plugins are entirely optional -->

    <!-- Offline -->
    <script src="js/annotonia/annotator.offline.js/offline.min.js"></script>
    <script>
      var pageID = window.location.pathname.match(/\/([^./]+)\.html$/);
      pageID = pageID[1] ? pageID[1] : undefined;

      var optionsOffline = {
        setAnnotationData: function (note) {
          note.pageID = pageID;
        },
        shouldLoadAnnotation : function (note) {
          return note.pageID === pageID;
        }
      }
    </script>

    <!-- RichText w TinyMCE -->
    <script src="js/annotonia/richText-annotator/lib/tinymce/tinymce.min.js"></script>
    <script src="js/annotonia/richText-annotator/richText-annotator.min.js"></script>
    <link rel="stylesheet" href="js/annotonia/richText-annotator/richText-annotator.min.css" />
    <style>
      .mce-path { display: none !important; }
      .mce-statusbar { border-width: 0 !important; }
    </style>
    <script>
        var optionsRichText = {
            tinymce:{
                extended_valid_elements : "iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",
                menubar: false,
                plugins: "media image insertdatetime link code",
                selector: "li.annotator-item textarea",
                toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | code ",
                toolbar_items_size: 'small',
            }
        };
    </script>

    <!-- The Store plugin. Saves annotations to a remote backend -->
    <script src="js/annotonia/annotator/pkg/annotator.store.min.js"></script>

    <!-- Tags -->
    <script src="js/annotonia/tags-annotator/src/tags-annotator.js"></script>
    <link rel="stylesheet" href="js/annotonia/tags-annotator/build/tags-annotator.min.css" />
    <script>
        var optionsTags = {
            tag: "Needs Annotated:red,Draft:yellow,Complete:green,Published:blue"
        };
    </script>
  </head>

  <body>
    <header>
      <h1>Javascript annotation service test</h1>
    </header>

    <div id="airlock">
      <p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

      <h2>Header Level 2</h2>

      <ol>
         <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
         <li>Aliquam tincidunt mauris eu risus.</li>
      </ol>

      <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

      <h3>Header Level 3</h3>

      <ul>
         <li id="listone">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
         <li id="listtwo">Aliquam tincidunt mauris eu risus.</li>
      </ul>

      <pre><code>
      #header h1 a {
        display: block;
        width: 300px;
        height: 80px;
      }
      </code></pre>

      <table>
        <thead>
          <tr>
            <td>Heading One</td>
            <td>Heading Two</td>
            <td>Heading Three</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>Side One</th>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
          </tr>
          <tr>
            <th>Side Two</th>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
          </tr>
          <tr>
            <th>Side Three</th>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
          </tr>
          <tr>
            <th>Side Four</th>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
            <td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      jQuery(function ($) {
        if (typeof $.fn.annotator !== 'function') {
          alert("Ooops! it looks like you haven't built the Annotator concatenation file. " +
                "Either download a tagged release from GitHub, or modify the Cakefile to point " +
                "at your copy of the YUI compressor and run `cake package`.");
        } else {
          // This is the important bit: how to create the annotator and add
          // plugins
          $('#airlock').annotator()
//                       .annotator('addPlugin', 'HighlightTags', optionsTags)
                       .annotator('addPlugin', 'Offline', optionsOffline)
                       .annotator('addPlugin', 'RichText', optionsRichText)
          ;
        }
      });
    </script>
  </body>
</html>

